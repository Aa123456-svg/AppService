<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
>
    <h:form id="#{trashBean.clazz.simpleName.toUpperCase()}_TRASH">
        <p:dataTable id="ITEMS_LIST"
                     styleClass="no-border"
                     var="item"
                     widgetVar="ITEMS_LIST"
                     draggableRows="false"
                     draggableColumns="true"
                     paginator="true"
                     lazy="true"
                     paginatorPosition="bottom"
                     sortMode="multiple"
                     paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                     rowsPerPageTemplate="5,10,15"
                     value="#{trashBean.appLazyDataModel}"
                     rows="#{trashBean.appLazyDataModel.pageSize}"
                     stickyHeader="#{trashBean.clazz.simpleName} List"
                     filteredValue="#{trashBean.filteredItems}"
        >

            <f:facet name="header">
                <div class="ui-g ui-fluid text-bold">
                    <div class="ui-g-12 ui-md-4">
                    </div>
                    <div class="ui-g-12 ui-md-4">
                    </div>
                    <div class="ui-g-12 ui-md-4">
                        <p:commandLink id="ITEM_LIST_TOGGLER">
                            <i class="glyphicon glyphicon-align-justify"/>
                            <span>Columns</span>
                        </p:commandLink>
                        <p:columnToggler datasource="ITEMS_LIST" trigger="ITEM_LIST_TOGGLER"/>
                    </div>
                </div>
                <hr/>
            </f:facet>

            <p:column headerText="Available Actions" width="150">
                <p:commandLink title="View" action="#{trashBean.load(item.id)}"
                               oncomplete="PF('VIEW_ITEM_DIALOG').show()"
                               styleClass="btn btn-outline-warning fa fa-eye"
                               update="VIEW_ITEM_DIALOG"
                />

                <p:commandLink title="Recycle" action="#{trashBean.recycle(item.id)}"
                               styleClass="btn btn-outline-warning fa fa-recycle"
                               update="ITEMS_LIST"
                />

                <p:commandLink title="Remove" action="#{trashBean.permanentDelete(item.id)}"
                               styleClass="btn btn-outline-danger fa fa-remove"
                               update="ITEMS_LIST"
                />
            </p:column>

            <p:column headerText="ID" sortBy="#{item.id}" filterBy="#{item.id}" filterMatchMode="contains" width="100">
                <h:outputText value="#{item.id}"/>
            </p:column>

            <p:column headerText="Display Name" sortBy="#{item.displayName}" filterBy="#{item.displayName}"
                      filterMatchMode="contains">
                <h:outputText value="#{item.displayName}"/>
            </p:column>

            <p:column headerText="Registered Date" sortBy="#{item.registeredDate}" filterBy="#{item.registeredDate}"
                      filterMatchMode="contains" visible="false">
                <h:outputText value="#{item.registeredDate}"/>
            </p:column>

            <p:column headerText="Update Date" sortBy="#{item.updatedDate}" filterBy="#{item.updatedDate}"
                      filterMatchMode="contains" visible="false">
                <h:outputText value="#{item.updatedDate}"/>
            </p:column>

        </p:dataTable>
    </h:form>
</ui:composition>