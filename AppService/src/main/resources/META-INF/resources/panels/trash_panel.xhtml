<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://xmlns.jcp.org/jsf/html"
>

    <p:tabView prependId="false">

        <!--        <p:tab title="#{accountTrashBean.clazz.simpleName} Trash">-->
        <!--            <ui:include src="/elements/trash_table.xhtml">-->
        <!--                <ui:param name="trashBean" value="#{accountTrashBean}"></ui:param>-->
        <!--            </ui:include>-->
        <!--        </p:tab>-->

        <!--        <p:tab title="#{menuTrashBean.clazz.simpleName} Trash">-->
        <!--            <ui:include src="/elements/trash_table.xhtml">-->
        <!--                <ui:param name="trashBean" value="#{menuTrashBean}"></ui:param>-->
        <!--            </ui:include>-->
        <!--        </p:tab>-->

        <p:tab title="#{panelTrashBean.clazz.simpleName} Trash">
            <h:form id="#{panelTrashBean.clazz.simpleName.toUpperCase()}_TRASH">
                <p:dataTable id="ITEMS_LIST"
                             styleClass="no-border"
                             var="item"
                             rowSelectMode="single"
                             widgetVar="ITEMS_LIST"
                             draggableRows="false"
                             draggableColumns="true"
                             paginator="true"
                             lazy="true"
                             paginatorPosition="bottom"
                             sortMode="multiple"
                             paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                             rowsPerPageTemplate="5,10,15"
                             rowsPerPageLabel="Rows per Page"
                             rows="#{panelTrashBean.appLazyDataModel.pageSize}"
                             value="#{panelTrashBean.appLazyDataModel}"
                             stickyHeader="#{panelTrashBean.clazz.simpleName} List"
                >

                    <f:facet name="header">
                        <div class="ui-g ui-fluid text-bold">
                            <div class="ui-g-12 ui-md-4">
                            </div>
                            <div class="ui-g-12 ui-md-4">
                            </div>
                            <div class="ui-g-12 ui-md-4">
                                <p:commandLink id="ITEM_LIST_TOGGLER">
                                    <i class="glyphicon glyphicon-align-justify"/>
                                    <span>Columns</span>
                                </p:commandLink>
                                <p:columnToggler datasource="ITEMS_LIST" trigger="ITEM_LIST_TOGGLER"/>
                            </div>
                        </div>
                        <hr/>
                    </f:facet>

                    <p:column headerText="Available Actions" width="150">
                        <p:commandLink title="View" action="#{panelTrashBean.load(item.id)}"
                                       oncomplete="PF('VIEW_ITEM_DIALOG').show()"
                                       styleClass="btn btn-outline-warning fa fa-eye"
                                       update="VIEW_ITEM_DIALOG"
                        />

                        <p:commandLink title="Recycle" action="#{panelTrashBean.recycle(item.id)}"
                                       styleClass="btn btn-outline-warning fa fa-recycle"
                                       update="ITEMS_LIST"
                        />

                        <p:commandLink title="Remove" action="#{panelTrashBean.permanentDelete(item.id)}"
                                       styleClass="btn btn-outline-danger fa fa-remove"
                                       update="ITEMS_LIST"
                        />
                    </p:column>

                    <p:column headerText="ID" sortBy="#{item.id}" filterBy="#{item.id}" filterMatchMode="contains"
                              width="100">
                        <h:outputText value="#{item.id}"/>
                    </p:column>

                    <p:column headerText="Display Name" sortBy="#{item.displayName}" filterBy="#{item.displayName}"
                              filterMatchMode="contains">
                        <h:outputText value="#{item.displayName}"/>
                    </p:column>

                    <p:column headerText="Registered Date" sortBy="#{item.registeredDate}"
                              filterBy="#{item.registeredDate}"
                              filterMatchMode="contains">
                        <h:outputText value="#{item.registeredDate}"/>
                    </p:column>

                    <p:column headerText="Update Date" sortBy="#{item.updatedDate}" filterBy="#{item.updatedDate}"
                              filterMatchMode="contains">
                        <h:outputText value="#{item.updatedDate}"/>
                    </p:column>

                </p:dataTable>
            </h:form>
        </p:tab>

    </p:tabView>

    <f:facet name="Options">
        <p:menu>
            <p:submenu label="Settings">
                <p:menuitem title="Toggle" url="#" icon="ui-icon-newwin" onclick="PF('panel').toggle()"/>
                <p:menuitem title="Remove" url="#" icon="ui-icon-close" onclick="PF('panel').close()"/>
            </p:submenu>
        </p:menu>
    </f:facet>

</ui:composition>